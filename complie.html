<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>คำนวณราคาสินค้าและราคาสินค้าทั้งหมด</title>
<style>
    /* Optional: เพิ่มสไตล์เพื่อปรับปรุงการแสดงผล */
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    label {
        display: block;
        margin-bottom: 10px;
    }
    .product {
        margin-bottom: 20px;
    }
    input[type="number"] {
        width: 100px;
    }
    button {
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #45a049;
    }
    .result {
        margin-top: 10px;
        font-size: 18px;
    }
    #total {
        font-size: 20px;
        font-weight: bold;
        margin-top: 20px;
    }
</style>
</head>
<body>
    <h2>คำนวณราคาสินค้าและราคาสินค้าทั้งหมด</h2>

    <div class="product">
        <label for="price1">ราคาต่อชิ้น (สินค้าที่ 1):</label>
        <input type="number" id="price1" class="price" value="100" onchange="updateTotal()">
        <button onclick="adjustQuantity(this, '+')">+</button>
        
        <input type="number" id="quantity1" class="quantity" value="2" onchange="updateTotal()">

        <button onclick="adjustQuantity(this, '-')">-</button>
        <div id="result1" class="result"></div>
    </div>

    <div class="product">
        <label for="price2">ราคาต่อชิ้น (สินค้าที่ 2):</label>
        <input type="number" id="price2" class="price" value="150" onchange="updateTotal()">
        <button onclick="adjustQuantity(this, '+')">+</button>
        <input type="number" id="quantity2" class="quantity" value="1" onchange="updateTotal()">
        <button onclick="adjustQuantity(this, '-')">-</button>
        <div id="result2" class="result"></div>
    </div>

    <div id="total"></div>

    <script>
        // JavaScript
        function adjustQuantity(button, operation) {
            // หา element ที่เกี่ยวข้องกับปุ่มที่ถูกคลิก
            var productDiv = button.closest('.product');
            var quantityElement = productDiv.querySelector('.quantity');
            var currentQuantity = parseInt(quantityElement.value);

            // ตรวจสอบว่าจะเพิ่มหรือลดจำนวนสินค้า
            if (operation === '+') {
                currentQuantity++;
            } else if (operation === '-') {
                if (currentQuantity > 0) {
                    currentQuantity--;
                } else {
                    return; // ไม่สามารถลดได้เมื่อค่าเป็นศูนย์
                }
            }

            // อัพเดตจำนวนสินค้าที่แสดง
            quantityElement.value = currentQuantity;

            // up

            // เรียกใช้ฟังก์ชัน updateTotal() เพื่ออัพเดตราคาทั้งหมด
            updateTotal();
        }

        function updateTotal() {
            var total = 0;

            // วนลูปผ่านทุกชิ้นสินค้าเพื่อหาราคาทั้งหมด
            var products = document.getElementsByClassName('product');
            for (var i = 0; i < products.length; i++) {
                var priceInput = products[i].querySelector('.price');
                //ค้นหาอิลิเมนต์ที่มีคลาส .quantity ภายในอิลิเมนต์ products[i] และเก็บอิลิเมนต์นั้นไว้ในตัวแปร quantityInput ดังนี้:
                var quantityInput = products[i].querySelector('.quantity');
                var resultproduct = products[i].querySelector('.result');

                var price = parseFloat(priceInput.value);
                //ซึ่งเป็นการดึงค่าจำนวนจากอิลิเมนต์ <input> ที่มี id="quantityInput" และแปลงค่านั้นเป็นตัวเลขจำนวนเต็ม (integer) ด้วย parseInt()
                var quantity = parseInt(quantityInput.value);

                var totalPrice = price * quantity;

                resultproduct.innerHTML = '<strong>ราคารวม: ' + totalPrice.toFixed(2) + ' บาท</strong>';

                // เพิ่มราคาทั้งหมด
                total += totalPrice;
            }

            // แสดงผลราคาสินค้าทั้งหมด
            var totalDiv = document.getElementById('total');
            totalDiv.innerHTML = '<h3>ราคาสินค้าทั้งหมด: ' + total.toFixed(2) + ' บาท</h3>';
        }
    </script>
</body>
</html>
